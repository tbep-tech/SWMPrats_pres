<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Open source reporting tools for the PEP Monitoring Collaborative: Beach Pathogens and Dissolved Oxygen</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dr. Marcus Beck \bullet @fawda123 \bullet #TampaBayOpensci" />
    <link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
    <script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
    <script src="libs/core-js-2.5.3/shim.min.js"></script>
    <script src="libs/react-16.12.0/react.min.js"></script>
    <script src="libs/react-16.12.0/react-dom.min.js"></script>
    <script src="libs/reactwidget-1.0.0/react-tools.js"></script>
    <script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
    <script src="libs/reactable-binding-0.2.3/reactable.js"></script>
    <script src="libs/plotly-binding-4.9.3/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <script src="libs/jquery-3.5.1/jquery.min.js"></script>
    <link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="styles3.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Open source reporting tools for the PEP Monitoring Collaborative: Beach Pathogens and Dissolved Oxygen
### <a href="mailto:mbeck@tbep.org">Dr. Marcus Beck</a> <span class="math inline">•</span> <a href="https://twitter.com/fawda123">@fawda123</a> <span class="math inline">•</span> <a href="https://twitter.com/hashtag/TampaBayOpenSci?src=hashtag_click">#TampaBayOpensci</a>
### Peconic Estuary WQ Monitoring Collaborative, Tampa Bay Estuary Program
### 1/29/2021

---




class: left, top

.center[
## AGENDA FOR TODAY
]

1. Brief review of PEP reporting tools: `pepreporting` R package

1. Development of beach pathogen reporting

1. Development of dissolved oxygen reporting

---

class: left, top

.center[
## GOALS FOR TODAY
]

1. Vibe check: do we like these approaches? 

1. Discuss decision points on pathogen reporting

1. Discuss decision points on dissolved oxygen reporting

---

class: center, top

## `pepreporting` R PACKAGE

&lt;img src="figure/pepintro.PNG" width="100%" style="display: block; margin: auto;" /&gt;

.footnote[[https://tbep-tech.github.io/pepreporting/](https://tbep-tech.github.io/pepreporting/)]

---

class: center, top

## `pepreporting` R PACKAGE

&lt;img src="figure/pepfuncs2.png" width="90%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## PAST DECISIONS
]

* Consider existing LTM datasets that can be used to assess progress in attaining CCMP goals (*Goal: Clean Waters*)
--

* Spatial divisions of Peconic Estuary for applying numeric thresholds
--

* Relevant thresholds and how to quantify (median vs. mean)

--
* Stoplight graphic for public-facing documents, update annually

---

class: left, top

.center[
## IT'S SUPER SIMPLE...
]


```r
library(pepreporting)
dat &lt;- read_pepwq('data/currentdata.xlsx')
show_thrpep(dat, bay_segment = "Western", param = "chla")
```

&lt;img src="pepreporting2_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## ESTIMATE SEGMENT MEDIANS
]

* All segment annual values based on medians, account for censored data (secchi on bottom)


```r
medpep &lt;- anlz_medpep(dat)
medpep$ann
```

```
## # A tibble: 792 x 5
##    bay_segment    yr   val est    var  
##    &lt;fct&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;
##  1 Western      2019  3.03 lwr.ci chla 
##  2 Western      2019  3.98 medv   chla 
##  3 Western      2019  5.13 upr.ci chla 
##  4 Western      2018  3.45 lwr.ci chla 
##  5 Western      2018  4.05 medv   chla 
##  6 Western      2018  5.07 upr.ci chla 
##  7 Western      2017  3.03 lwr.ci chla 
##  8 Western      2017  4.22 medv   chla 
##  9 Western      2017  5.89 upr.ci chla 
## 10 Western      2016  2.8  lwr.ci chla 
## # ... with 782 more rows
```

---

.center[
## REPORTING
]

* Provisional targets ([Suffolk Co 2019 SWP](https://suffolkcountyny.gov/Departments/Health-Services/Environmental-Quality#SubWWPlan)) for water clarity and secchi depth


```r
peptargets
```

```
## # A tibble: 3 x 4
##   bay_segment name    sd_thresh chla_thresh
##   &lt;fct&gt;       &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1 Western     Western       6.5         5.5
## 2 Central     Central       6.5         5.5
## 3 Eastern     Eastern       6.5         5.5
```

---

.center[
## REPORTING
]

* Apply targets to annual medians


```r
anlz_attainpep(medpep)
```

```
## # A tibble: 132 x 4
##    bay_segment    yr chla_sd outcome
##    &lt;fct&gt;       &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  
##  1 Western      2019 0_2     yellow 
##  2 Western      2018 0_3     yellow 
##  3 Western      2017 2_3     red    
##  4 Western      2016 0_3     yellow 
##  5 Western      2015 0_2     yellow 
##  6 Western      2014 0_0     green  
##  7 Western      2013 0_1     yellow 
##  8 Western      2012 0_2     yellow 
##  9 Western      2011 0_2     yellow 
## 10 Western      2010 1_3     red    
## # ... with 122 more rows
```

---

class: left, top

.center[
## REPORTING
]

* Annual categories depend on both a __duration__ and __magnitude__ of exceedance
* Jointly considers chlorophyll and water clarity endpoints
--

&lt;img src="figure/outints.png" width="90%" style="display: block; margin: auto;" /&gt;

.center[
.footnote[[TBEP tech report #04-00](https://drive.google.com/file/d/1juhfptqA4R-Bq_XfW6nOhqFxJSorGkfq/view?usp=drivesdk)]
]

---

class: left, top

.center[
## REPORTING
]


* Annual categories depend on both a __duration__ and __magnitude__ of exceedance
* Jointly considers chlorophyll and water clarity endpoints

&lt;img src="figure/matrixcats.png" width="80%" style="display: block; margin: auto;" /&gt;

.center[
.footnote[[TBEP tech report #04-00](https://drive.google.com/file/d/1juhfptqA4R-Bq_XfW6nOhqFxJSorGkfq/view?usp=drivesdk)]
]

---

class: left, top

.center[
## REPORTING
]

* Translate segment water quality conditions into annual reporting categories to inform/prioritize management actions towards CCMP goals
--

* In Tampa...

&lt;span style="color:#33FF3B; text-shadow: 0 0 3px #333;"&gt;__Stay the Course__&lt;/span&gt;: Continue planned projects. Report data via annual progress reports and Baywide Environmental Monitoring Report. 

&lt;span style="color:#F9FF33; text-shadow: 0 0 3px #333;"&gt;__Caution__&lt;/span&gt;: Review monitoring data and nitrogen loading estimates. Begin/continue TAC and Management Board development of specific management recommendations.

&lt;span style="color:#FF3333; text-shadow: 0 0 3px #333;"&gt;__On Alert__&lt;/span&gt;: Finalize development and implement appropriate management actions to get back on track.

---

class: left, top

.center[
## REPORTING
]


```r
show_matrixpep(dat, asreact = TRUE, nrows = 8)
```

<div id="htmlwidget-d8d88aa9f2bd8bfac906" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d8d88aa9f2bd8bfac906">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"yr":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"Western":["yellow","yellow","yellow","yellow","yellow","red","red","red","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","red","red","yellow","yellow","yellow","green","yellow","yellow","red","yellow","yellow"],"Central":["green","yellow","yellow","green","green","yellow","green","green","green","green","green","green","green","green","green","green","green","green","green","green","yellow","green","yellow","green","green","green","yellow","yellow","yellow","green"],"Eastern":["green","yellow","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green"]},"columns":[{"accessor":"yr","name":"Year","type":"numeric","style":[{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null}]},{"accessor":"Western","name":"Western","type":"character","style":[{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"}]},{"accessor":"Central","name":"Central","type":"character","style":[{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"}]},{"accessor":"Eastern","name":"Eastern","type":"character","style":[{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"}]}],"defaultPageSize":8,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"ef6370cbfc87424fcf7982b3a94d3b1f","key":"ef6370cbfc87424fcf7982b3a94d3b1f"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>

---

class: left, top

.center[
## REPORTING
]


```r
show_plotlypep(rawdat, bay_segment = 'Western')
```

<div id="htmlwidget-9153a0f505f634aabd28" style="width:100%;height:440px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-9153a0f505f634aabd28">{"x":{"data":[{"x":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[4,4.7,3.7,3.55,2.8,5.3,5.725,6.255,3.18,3.15,2.31,2.9224,3.0368,3.9208,3.64,3.952,3.9624,3.8116,3.7856,4.0768,6.24,3.7804,4.0404,5.125,2.98,2.47,3.12,4.22,4.05,3.98],"text":["yr: 1990<br />medv: 4.0000<br />colour: Annual Median","yr: 1991<br />medv: 4.7000<br />colour: Annual Median","yr: 1992<br />medv: 3.7000<br />colour: Annual Median","yr: 1993<br />medv: 3.5500<br />colour: Annual Median","yr: 1994<br />medv: 2.8000<br />colour: Annual Median","yr: 1995<br />medv: 5.3000<br />colour: Annual Median","yr: 1996<br />medv: 5.7250<br />colour: Annual Median","yr: 1997<br />medv: 6.2550<br />colour: Annual Median","yr: 1998<br />medv: 3.1800<br />colour: Annual Median","yr: 1999<br />medv: 3.1500<br />colour: Annual Median","yr: 2000<br />medv: 2.3100<br />colour: Annual Median","yr: 2001<br />medv: 2.9224<br />colour: Annual Median","yr: 2002<br />medv: 3.0368<br />colour: Annual Median","yr: 2003<br />medv: 3.9208<br />colour: Annual Median","yr: 2004<br />medv: 3.6400<br />colour: Annual Median","yr: 2005<br />medv: 3.9520<br />colour: Annual Median","yr: 2006<br />medv: 3.9624<br />colour: Annual Median","yr: 2007<br />medv: 3.8116<br />colour: Annual Median","yr: 2008<br />medv: 3.7856<br />colour: Annual Median","yr: 2009<br />medv: 4.0768<br />colour: Annual Median","yr: 2010<br />medv: 6.2400<br />colour: Annual Median","yr: 2011<br />medv: 3.7804<br />colour: Annual Median","yr: 2012<br />medv: 4.0404<br />colour: Annual Median","yr: 2013<br />medv: 5.1250<br />colour: Annual Median","yr: 2014<br />medv: 2.9800<br />colour: Annual Median","yr: 2015<br />medv: 2.4700<br />colour: Annual Median","yr: 2016<br />medv: 3.1200<br />colour: Annual Median","yr: 2017<br />medv: 4.2200<br />colour: Annual Median","yr: 2018<br />medv: 4.0500<br />colour: Annual Median","yr: 2019<br />medv: 3.9800<br />colour: Annual Median"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","opacity":1,"size":11.3385826771654,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)"}},"hoveron":"points","name":"Annual Median","legendgroup":"Annual Median","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":2.83464566929134,"color":"rgba(255,0,0,1)","dash":"solid"},"frame":null},{"x":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[4.1,4.75,3.65,3.55,2.975,5.4,5.76666666666667,6.26,3.28,3.1,2.345,2.9588,2.9432,4.2224,3.6712,3.9962,4.0768,3.8324,3.9988,4.524,6.4974,3.9312,4.0404,4.77,2.825,2.395,3.28,4.46,4.26,4.08],"text":["yr: 1990<br />lwr.ci: 3.5000<br />upr.ci: 4.700000<br />colour: Annual Median","yr: 1991<br />lwr.ci: 4.0000<br />upr.ci: 5.500000<br />colour: Annual Median","yr: 1992<br />lwr.ci: 3.3000<br />upr.ci: 4.000000<br />colour: Annual Median","yr: 1993<br />lwr.ci: 3.3000<br />upr.ci: 3.800000<br />colour: Annual Median","yr: 1994<br />lwr.ci: 2.6500<br />upr.ci: 3.300000<br />colour: Annual Median","yr: 1995<br />lwr.ci: 4.7000<br />upr.ci: 6.100000<br />colour: Annual Median","yr: 1996<br />lwr.ci: 5.2000<br />upr.ci: 6.333333<br />colour: Annual Median","yr: 1997<br />lwr.ci: 5.7200<br />upr.ci: 6.800000<br />colour: Annual Median","yr: 1998<br />lwr.ci: 2.8700<br />upr.ci: 3.690000<br />colour: Annual Median","yr: 1999<br />lwr.ci: 2.7200<br />upr.ci: 3.480000<br />colour: Annual Median","yr: 2000<br />lwr.ci: 1.8800<br />upr.ci: 2.810000<br />colour: Annual Median","yr: 2001<br />lwr.ci: 2.4440<br />upr.ci: 3.473600<br />colour: Annual Median","yr: 2002<br />lwr.ci: 2.6416<br />upr.ci: 3.244800<br />colour: Annual Median","yr: 2003<br />lwr.ci: 3.2968<br />upr.ci: 5.148000<br />colour: Annual Median","yr: 2004<br />lwr.ci: 2.7872<br />upr.ci: 4.555200<br />colour: Annual Median","yr: 2005<br />lwr.ci: 3.4944<br />upr.ci: 4.498000<br />colour: Annual Median","yr: 2006<br />lwr.ci: 3.4840<br />upr.ci: 4.669600<br />colour: Annual Median","yr: 2007<br />lwr.ci: 3.3124<br />upr.ci: 4.352400<br />colour: Annual Median","yr: 2008<br />lwr.ci: 3.3072<br />upr.ci: 4.690400<br />colour: Annual Median","yr: 2009<br />lwr.ci: 3.4528<br />upr.ci: 5.595200<br />colour: Annual Median","yr: 2010<br />lwr.ci: 4.5864<br />upr.ci: 8.408400<br />colour: Annual Median","yr: 2011<br />lwr.ci: 3.1720<br />upr.ci: 4.690400<br />colour: Annual Median","yr: 2012<br />lwr.ci: 3.4008<br />upr.ci: 4.680000<br />colour: Annual Median","yr: 2013<br />lwr.ci: 4.0900<br />upr.ci: 5.450000<br />colour: Annual Median","yr: 2014<br />lwr.ci: 2.4100<br />upr.ci: 3.240000<br />colour: Annual Median","yr: 2015<br />lwr.ci: 1.9400<br />upr.ci: 2.850000<br />colour: Annual Median","yr: 2016<br />lwr.ci: 2.8000<br />upr.ci: 3.760000<br />colour: Annual Median","yr: 2017<br />lwr.ci: 3.0300<br />upr.ci: 5.890000<br />colour: Annual Median","yr: 2018<br />lwr.ci: 3.4500<br />upr.ci: 5.070000<br />colour: Annual Median","yr: 2019<br />lwr.ci: 3.0300<br />upr.ci: 5.130000<br />colour: Annual Median"],"type":"scatter","mode":"lines","opacity":1,"line":{"color":"transparent"},"error_y":{"array":[0.600000000000001,0.75,0.35,0.25,0.325,0.699999999999999,0.566666666666666,0.54,0.41,0.38,0.465,0.5148,0.3016,0.925599999999999,0.884,0.5018,0.5928,0.52,0.6916,1.0712,1.911,0.7592,0.6396,0.680000000000001,0.415,0.455,0.48,1.43,0.81,1.05],"arrayminus":[0.6,0.75,0.35,0.25,0.325,0.7,0.566666666666666,0.539999999999999,0.41,0.38,0.465,0.5148,0.3016,0.9256,0.884,0.5018,0.5928,0.52,0.6916,1.0712,1.911,0.7592,0.6396,0.68,0.415,0.455,0.48,1.43,0.81,1.05],"type":"data","width":11.6240451677183,"symmetric":false,"color":"rgba(255,0,0,1)"},"name":"Annual Median","legendgroup":"Annual Median","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1989.445,2019.555],"y":[5.5,5.5],"text":"thrnum: 5.5<br />colour: Threshold","type":"scatter","mode":"lines","line":{"width":2.83464566929134,"color":"rgba(0,0,255,1)","dash":"dot"},"hoveron":"points","name":"Threshold","legendgroup":"Threshold","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2018.5,2019.5,2019.5,2018.5,2018.5,null,2017.5,2018.5,2018.5,2017.5,2017.5],"y":[2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5],"text":"Result: Outcome: 0, Exceedance: none (size), NA (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2012.5,2013.5,2013.5,2012.5,2012.5,null,2011.5,2012.5,2012.5,2011.5,2011.5,null,2010.5,2011.5,2011.5,2010.5,2010.5,null,2004.5,2005.5,2005.5,2004.5,2004.5,null,2003.5,2004.5,2004.5,2003.5,2003.5,null,2002.5,2003.5,2003.5,2002.5,2002.5,null,2001.5,2002.5,2002.5,2001.5,2001.5,null,2000.5,2001.5,2001.5,2000.5,2000.5,null,1999.5,2000.5,2000.5,1999.5,1999.5,null,1998.5,1999.5,1999.5,1998.5,1998.5,null,1997.5,1998.5,1998.5,1997.5,1997.5,null,1990.5,1991.5,1991.5,1990.5,1990.5,null,1989.5,1990.5,1990.5,1989.5,1989.5],"y":[2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5],"text":"Result: Outcome: 0, Exceedance: none (size), none (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2015.5,2016.5,2016.5,2015.5,2015.5,null,2014.5,2015.5,2015.5,2014.5,2014.5,null,2013.5,2014.5,2014.5,2013.5,2013.5,null,2007.5,2008.5,2008.5,2007.5,2007.5,null,2006.5,2007.5,2007.5,2006.5,2006.5,null,2005.5,2006.5,2006.5,2005.5,2005.5,null,1993.5,1994.5,1994.5,1993.5,1993.5,null,1992.5,1993.5,1993.5,1992.5,1992.5,null,1991.5,1992.5,1992.5,1991.5,1991.5,null,2013.5,2014.5,2014.5,2013.5,2013.5],"y":[2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5],"text":"Result: Outcome: 0, Exceedance: none (size), short (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2008.5,2009.5,2009.5,2008.5,2008.5,null,1994.5,1995.5,1995.5,1994.5,1994.5,null,2012.5,2013.5,2013.5,2012.5,2012.5],"y":[2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5],"text":"Result: Outcome: 1, Exceedance: small (size), short (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2006.5,2007.5,2007.5,2006.5,2006.5,null,2005.5,2006.5,2006.5,2005.5,2005.5,null,1997.5,1998.5,1998.5,1997.5,1997.5],"y":[0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"text":"Result: Outcome: 2, Exceedance: small (size), long (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2016.5,2017.5,2017.5,2016.5,2016.5],"y":[2.5,2.5,3.5,3.5,2.5],"text":"Result: Outcome: 2, Exceedance: small (size), NA (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2013.5,2014.5,2014.5,2013.5,2013.5],"y":[1.5,1.5,2.5,2.5,1.5],"text":"Result: Stay the Course (chla: 0, sd: 0)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2009.5,2010.5,2010.5,2009.5,2009.5,null,2008.5,2009.5,2009.5,2008.5,2008.5,null,1995.5,1996.5,1996.5,1995.5,1995.5,null,1994.5,1995.5,1995.5,1994.5,1994.5],"y":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5],"text":"Result: On Alert (chla: 1, sd: 3)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2016.5,2017.5,2017.5,2016.5,2016.5,null,1996.5,1997.5,1997.5,1996.5,1996.5],"y":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5],"text":"Result: On Alert (chla: 2, sd: 3)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2009.5,2010.5,2010.5,2009.5,2009.5,null,1995.5,1996.5,1996.5,1995.5,1995.5],"y":[2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5],"text":"Result: Outcome: 1, Exceedance: small (size), short (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1996.5,1997.5,1997.5,1996.5,1996.5,null,2011.5,2012.5,2012.5,2011.5,2011.5,null,2010.5,2011.5,2011.5,2010.5,2010.5],"y":[2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"text":"Result: Outcome: 2, Exceedance: large (size), short (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2014.5,2015.5,2015.5,2014.5,2014.5,null,2003.5,2004.5,2004.5,2003.5,2003.5,null,2001.5,2002.5,2002.5,2001.5,2001.5,null,2000.5,2001.5,2001.5,2000.5,2000.5,null,1998.5,1999.5,1999.5,1998.5,1998.5,null,1993.5,1994.5,1994.5,1993.5,1993.5],"y":[0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"text":"Result: Outcome: 2, Exceedance: small (size), long (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2018.5,2019.5,2019.5,2018.5,2018.5],"y":[0.5,0.5,1.5,1.5,0.5],"text":"Result: Outcome: 2, Exceedance: small (size), NA (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2015.5,2016.5,2016.5,2015.5,2015.5,null,2009.5,2010.5,2010.5,2009.5,2009.5,null,2008.5,2009.5,2009.5,2008.5,2008.5,null,2007.5,2008.5,2008.5,2007.5,2007.5,null,2004.5,2005.5,2005.5,2004.5,2004.5,null,2002.5,2003.5,2003.5,2002.5,2002.5,null,1999.5,2000.5,2000.5,1999.5,1999.5,null,1996.5,1997.5,1997.5,1996.5,1996.5,null,1995.5,1996.5,1996.5,1995.5,1995.5,null,1994.5,1995.5,1995.5,1994.5,1994.5,null,1992.5,1993.5,1993.5,1992.5,1992.5,null,1991.5,1992.5,1992.5,1991.5,1991.5,null,1990.5,1991.5,1991.5,1990.5,1990.5,null,1989.5,1990.5,1990.5,1989.5,1989.5],"y":[0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"text":"Result: Outcome: 3, Exceedance: large (size), long (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2017.5,2018.5,2018.5,2017.5,2017.5,null,2016.5,2017.5,2017.5,2016.5,2016.5],"y":[0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"text":"Result: Outcome: 3, Exceedance: large (size), NA (length)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2012.5,2013.5,2013.5,2012.5,2012.5],"y":[1.5,1.5,2.5,2.5,1.5],"text":"Result: Caution (chla: 0, sd: 1)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2018.5,2019.5,2019.5,2018.5,2018.5,null,2014.5,2015.5,2015.5,2014.5,2014.5,null,2011.5,2012.5,2012.5,2011.5,2011.5,null,2010.5,2011.5,2011.5,2010.5,2010.5,null,2006.5,2007.5,2007.5,2006.5,2006.5,null,2005.5,2006.5,2006.5,2005.5,2005.5,null,2003.5,2004.5,2004.5,2003.5,2003.5,null,2001.5,2002.5,2002.5,2001.5,2001.5,null,2000.5,2001.5,2001.5,2000.5,2000.5,null,1998.5,1999.5,1999.5,1998.5,1998.5,null,1997.5,1998.5,1998.5,1997.5,1997.5,null,1993.5,1994.5,1994.5,1993.5,1993.5],"y":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5],"text":"Result: Caution (chla: 0, sd: 2)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2017.5,2018.5,2018.5,2017.5,2017.5,null,2015.5,2016.5,2016.5,2015.5,2015.5,null,2007.5,2008.5,2008.5,2007.5,2007.5,null,2004.5,2005.5,2005.5,2004.5,2004.5,null,2002.5,2003.5,2003.5,2002.5,2002.5,null,1999.5,2000.5,2000.5,1999.5,1999.5,null,1992.5,1993.5,1993.5,1992.5,1992.5,null,1991.5,1992.5,1992.5,1991.5,1991.5,null,1990.5,1991.5,1991.5,1990.5,1990.5,null,1989.5,1990.5,1990.5,1989.5,1989.5],"y":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5],"text":"Result: Caution (chla: 0, sd: 3)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[5.5,4.5,4.75,5,6,5.5,6,6,6.5,6,5.5,6,6,5.5,6,6,7,7,6,5.5,5.25,5.5,5,7,8,6,5,5,5.5,6],"text":["yr: 1990<br />medv: 5.50<br />colour: Annual Median","yr: 1991<br />medv: 4.50<br />colour: Annual Median","yr: 1992<br />medv: 4.75<br />colour: Annual Median","yr: 1993<br />medv: 5.00<br />colour: Annual Median","yr: 1994<br />medv: 6.00<br />colour: Annual Median","yr: 1995<br />medv: 5.50<br />colour: Annual Median","yr: 1996<br />medv: 6.00<br />colour: Annual Median","yr: 1997<br />medv: 6.00<br />colour: Annual Median","yr: 1998<br />medv: 6.50<br />colour: Annual Median","yr: 1999<br />medv: 6.00<br />colour: Annual Median","yr: 2000<br />medv: 5.50<br />colour: Annual Median","yr: 2001<br />medv: 6.00<br />colour: Annual Median","yr: 2002<br />medv: 6.00<br />colour: Annual Median","yr: 2003<br />medv: 5.50<br />colour: Annual Median","yr: 2004<br />medv: 6.00<br />colour: Annual Median","yr: 2005<br />medv: 6.00<br />colour: Annual Median","yr: 2006<br />medv: 7.00<br />colour: Annual Median","yr: 2007<br />medv: 7.00<br />colour: Annual Median","yr: 2008<br />medv: 6.00<br />colour: Annual Median","yr: 2009<br />medv: 5.50<br />colour: Annual Median","yr: 2010<br />medv: 5.25<br />colour: Annual Median","yr: 2011<br />medv: 5.50<br />colour: Annual Median","yr: 2012<br />medv: 5.00<br />colour: Annual Median","yr: 2013<br />medv: 7.00<br />colour: Annual Median","yr: 2014<br />medv: 8.00<br />colour: Annual Median","yr: 2015<br />medv: 6.00<br />colour: Annual Median","yr: 2016<br />medv: 5.00<br />colour: Annual Median","yr: 2017<br />medv: 5.00<br />colour: Annual Median","yr: 2018<br />medv: 5.50<br />colour: Annual Median","yr: 2019<br />medv: 6.00<br />colour: Annual Median"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","opacity":1,"size":11.3385826771654,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)"}},"hoveron":"points","name":"Annual Median","legendgroup":"Annual Median","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","line":{"width":2.83464566929134,"color":"rgba(255,0,0,1)","dash":"solid"},"frame":null},{"x":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[5.75,4.75,4.625,4.875,6.5,5.5,5.875,6,6.5,6.5,5.5,6.25,6.5,5.75,6,5.5,7,7,5.75,5.5,5.5,5.5,5.25,7,8.75,6.5,5,5.25,5.5,6],"text":["yr: 1990<br />lwr.ci: 5.00<br />upr.ci:  6.5<br />colour: Annual Median","yr: 1991<br />lwr.ci: 4.00<br />upr.ci:  5.5<br />colour: Annual Median","yr: 1992<br />lwr.ci: 4.25<br />upr.ci:  5.0<br />colour: Annual Median","yr: 1993<br />lwr.ci: 4.75<br />upr.ci:  5.0<br />colour: Annual Median","yr: 1994<br />lwr.ci: 6.00<br />upr.ci:  7.0<br />colour: Annual Median","yr: 1995<br />lwr.ci: 5.00<br />upr.ci:  6.0<br />colour: Annual Median","yr: 1996<br />lwr.ci: 5.75<br />upr.ci:  6.0<br />colour: Annual Median","yr: 1997<br />lwr.ci: 5.50<br />upr.ci:  6.5<br />colour: Annual Median","yr: 1998<br />lwr.ci: 6.00<br />upr.ci:  7.0<br />colour: Annual Median","yr: 1999<br />lwr.ci: 6.00<br />upr.ci:  7.0<br />colour: Annual Median","yr: 2000<br />lwr.ci: 5.00<br />upr.ci:  6.0<br />colour: Annual Median","yr: 2001<br />lwr.ci: 5.50<br />upr.ci:  7.0<br />colour: Annual Median","yr: 2002<br />lwr.ci: 6.00<br />upr.ci:  7.0<br />colour: Annual Median","yr: 2003<br />lwr.ci: 5.00<br />upr.ci:  6.5<br />colour: Annual Median","yr: 2004<br />lwr.ci: 5.00<br />upr.ci:  7.0<br />colour: Annual Median","yr: 2005<br />lwr.ci: 5.00<br />upr.ci:  6.0<br />colour: Annual Median","yr: 2006<br />lwr.ci: 6.50<br />upr.ci:  7.5<br />colour: Annual Median","yr: 2007<br />lwr.ci: 6.00<br />upr.ci:  8.0<br />colour: Annual Median","yr: 2008<br />lwr.ci: 5.50<br />upr.ci:  6.0<br />colour: Annual Median","yr: 2009<br />lwr.ci: 5.00<br />upr.ci:  6.0<br />colour: Annual Median","yr: 2010<br />lwr.ci: 5.00<br />upr.ci:  6.0<br />colour: Annual Median","yr: 2011<br />lwr.ci: 5.00<br />upr.ci:  6.0<br />colour: Annual Median","yr: 2012<br />lwr.ci: 5.00<br />upr.ci:  5.5<br />colour: Annual Median","yr: 2013<br />lwr.ci: 6.00<br />upr.ci:  8.0<br />colour: Annual Median","yr: 2014<br />lwr.ci: 7.00<br />upr.ci: 10.5<br />colour: Annual Median","yr: 2015<br />lwr.ci: 6.00<br />upr.ci:  7.0<br />colour: Annual Median","yr: 2016<br />lwr.ci: 4.50<br />upr.ci:  5.5<br />colour: Annual Median","yr: 2017<br />lwr.ci: 4.50<br />upr.ci:  6.0<br />colour: Annual Median","yr: 2018<br />lwr.ci: 5.00<br />upr.ci:  6.0<br />colour: Annual Median","yr: 2019<br />lwr.ci: 5.00<br />upr.ci:  7.0<br />colour: Annual Median"],"type":"scatter","mode":"lines","opacity":1,"line":{"color":"transparent"},"error_y":{"array":[0.75,0.75,0.375,0.125,0.5,0.5,0.125,0.5,0.5,0.5,0.5,0.75,0.5,0.75,1,0.5,0.5,1,0.25,0.5,0.5,0.5,0.25,1,1.75,0.5,0.5,0.75,0.5,1],"arrayminus":[0.75,0.75,0.375,0.125,0.5,0.5,0.125,0.5,0.5,0.5,0.5,0.75,0.5,0.75,1,0.5,0.5,1,0.25,0.5,0.5,0.5,0.25,1,1.75,0.5,0.5,0.75,0.5,1],"type":"data","width":11.6240451677183,"symmetric":false,"color":"rgba(255,0,0,1)"},"name":"Annual Median","legendgroup":"Annual Median","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[1989.445,2019.555],"y":[6.5,6.5],"text":"thrnum: 6.5<br />colour: Threshold","type":"scatter","mode":"lines","line":{"width":2.83464566929134,"color":"rgba(0,0,255,1)","dash":"dot"},"hoveron":"points","name":"Threshold","legendgroup":"Threshold","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null}],"layout":{"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1989.445,2019.555],"tickmode":"array","ticktext":["1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"tickvals":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"categoryorder":"array","categoryarray":["1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.29846409298464},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y3","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"yaxis3":{"domain":[0,0.38],"automargin":true,"type":"linear","autorange":false,"range":[3.675,10.825],"tickmode":"array","ticktext":["4","6","8","10"],"tickvals":[4,6,8,10],"categoryorder":"array","categoryarray":["4","6","8","10"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Median Secchi (ft)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis2":{"domain":[0.42,0.58],"automargin":true,"type":"linear","autorange":false,"range":[0.5,3.5],"tickmode":"array","ticktext":["Secchi","Outcome","Chlorophyll-a"],"tickvals":[1,2,3],"categoryorder":"array","categoryarray":["Secchi","Outcome","Chlorophyll-a"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.9402241594022},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"yaxis":{"domain":[0.62,1],"automargin":true,"type":"linear","autorange":false,"range":[1.55358,8.73482],"tickmode":"array","ticktext":["2","4","6","8"],"tickvals":[2,4,6,8],"categoryorder":"array","categoryarray":["2","4","6","8"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Median Chl-a (ug/L)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"annotations":[],"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.62,"y1":1},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.42,"y1":0.58},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.38}],"images":[],"margin":{"t":23.3059360730594,"r":7.30593607305936,"b":21.881397744462,"l":37.2602739726027},"plot_bgcolor":"rgba(236,236,236,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"showlegend":true,"legend":{"bgcolor":"transparent","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":1},"hovermode":"closest","barmode":"relative"},"attrs":{"402836026039":{"x":{},"y":{},"colour":{},"type":"scatter"},"40282f224a8e":{"x":{},"y":{},"colour":{}},"40282a592eef":{"x":{},"ymin":{},"ymax":{},"colour":{}},"4028539d7d57":{"yintercept":{},"colour":{}},"402836a064e5":{"x":{},"y":{},"fill":{},"type":"scatter"},"402812092715":{"x":{},"y":{},"colour":{},"type":"scatter"},"4028704421c3":{"x":{},"y":{},"colour":{}},"402857267d5f":{"x":{},"ymin":{},"ymax":{},"colour":{}},"4028489b45bf":{"yintercept":{},"colour":{}}},"source":"A","config":{"doubleClick":"reset","showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

---

class: left, top

.center[
## BEACH PATHOGENS
]

* 28 swimming/bathing beaches in the Peconic Estuary
--

* *Enterococcus* concentrations monitored by SCDHS
--

* Beaches are closed if concentrations are high
--

* Data can be summarized to understand __relative risk__ of exposure
--

.center[
.footnote[[https://tbep-tech.github.io/pepreporting/articles/pathogens.html](https://tbep-tech.github.io/pepreporting/articles/pathogens.html)]
]

---

class: left, top

.center[
## PATHOGENS: IMPORT
]

* Data are available as a spreadsheet [here](https://gisportal.suffolkcountyny.gov/gis/home/item.html?id=025cb4dadb57413980dbd7e760b94da8)

&lt;img src="figure/enteroraw.PNG" width="100%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## PATHOGENS: IMPORT
]

* Import the data with [`read_pepent()`](https://tbep-tech.github.io/pepreporting/reference/read_pepent.html)


```r
path &lt;- system.file('extdata', 'enterodata.xlsx', 
                    package = 'pepreporting')
entdat &lt;- read_pepent(path)
head(entdat)
```

```
## # A tibble: 6 x 5
##   Name                  FieldNum Date                value status
##   &lt;chr&gt;                 &lt;chr&gt;    &lt;dttm&gt;              &lt;dbl&gt; &lt;chr&gt; 
## 1 Alberts Landing Beach EH7      2010-06-29 09:47:00     4 "&lt;"   
## 2 Alberts Landing Beach EH7      2010-07-27 09:49:00     4 "&lt;"   
## 3 Alberts Landing Beach EH7      2010-08-13 09:18:00    28 ""    
## 4 Alberts Landing Beach EH7      2011-06-22 10:21:00     4 "&lt;"   
## 5 Alberts Landing Beach EH7      2011-07-20 10:57:00     4 "&lt;"   
## 6 Alberts Landing Beach EH7      2011-08-17 11:14:00     4 "&lt;"
```

---

class: left, top

.center[
## PATHOGENS: SUMMARIZE
]

* Summarize the data with [`anlz_entpep()`](https://tbep-tech.github.io/pepreporting/reference/anlz_entpep.html)
* This creates a count of exceedances in each 24 hour period for each year and each beach
--


```r
entsum &lt;- anlz_entpep(entdat)
head(entsum)
```

```
## # A tibble: 6 x 4
##   Name                     yr exceedances outcome
##   &lt;chr&gt;                 &lt;dbl&gt;       &lt;int&gt; &lt;chr&gt;  
## 1 Alberts Landing Beach  2010           0 green  
## 2 Alberts Landing Beach  2011           0 green  
## 3 Alberts Landing Beach  2012           0 green  
## 4 Alberts Landing Beach  2013           0 green  
## 5 Alberts Landing Beach  2014           0 green  
## 6 Alberts Landing Beach  2015           0 green
```

---

class: left, top

.center[
## PATHOGENS: PLOT
]

* Plot the results with [`show_entmatrix()`](https://tbep-tech.github.io/pepreporting/reference/show_entmatrix.html)


```r
show_entmatrix(entdat)
```

&lt;img src="pepreporting2_files/figure-html/unnamed-chunk-15-1.png" width="100%" height="60%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## PATHOGENS: DISCUSS
]

* This plot communicates exposure risk, NOT beach closures
--

* Exceedances based on concentrations above 104 cfu/100 mL
--

* Color categories based on zero (green), one (yellow), and two or more (red)
--

* We can change this...

---

class: left, top

.center[
## PATHOGENS: DISCUSS
]

* Changing the default arguments...


```r
show_entmatrix(entdat, thr = 35, cats = c(0, 1, 3))
```

&lt;img src="pepreporting2_files/figure-html/unnamed-chunk-16-1.png" width="100%" height="60%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## DISSOLVED OXYGEN
]

* Two continuous USGS monitoring stations in Peconic Estuary
--

* Peconic River (01304562) and Orient Harbor (01304200)
--

* Data can be summarized to understand hypoxia frequency/duration
--

.center[
.footnote[[https://tbep-tech.github.io/pepreporting/articles/dissolvedoxygen.html](https://tbep-tech.github.io/pepreporting/articles/dissolvedoxygen.html)]
]

---

class: left, top

.center[
## DO: IMPORT
]

* Data can be downloaded directly from USGS data source with [`read_pepdo()`](https://tbep-tech.github.io/pepreporting/reference/read_pepdo.html)


```r
exdat &lt;- read_pepdo(site = c('01304562', '01304200'), 
  nms = c('Peconic R.', 'Orient Harbor'), 
  startDate = '2013-01-01', endDate = '2020-06-30')
head(exdat)
```

```
##            site            DateTime do_mgl
## 1 Orient Harbor 2013-01-01 00:00:00   11.2
## 2 Orient Harbor 2013-01-01 00:06:00   11.2
## 3 Orient Harbor 2013-01-01 00:12:00   11.2
## 4 Orient Harbor 2013-01-01 00:18:00   11.2
## 5 Orient Harbor 2013-01-01 00:24:00   11.2
## 6 Orient Harbor 2013-01-01 00:30:00   11.2
```

---
class: left, top

.center[
## DO: IMPORT
]

&lt;img src="pepreporting2_files/figure-html/unnamed-chunk-19-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
class: left, top

.center[
## DO: IMPORT
]

&lt;img src="pepreporting2_files/figure-html/unnamed-chunk-20-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## CHALLENGES WITH DO DATA
]

* DO data have diurnal and seasonal variation, how can we summarize this to quantify hypoxia stress?
--

* Hypoxia can have both acute and chronic impacts, how can we summarize the DO data to express magnitude and duration of hypoxia?

---

class: left, top

.center[
## DO: SUMMARIZE
]

* Summarize the data with [`anlz_domopep()`](https://tbep-tech.github.io/pepreporting/reference/anlz_domopep.html)
--

* Gets the following for each month:
     * Mean daily DO
     * Proportion of days with low DO (magnitude)
     * Max run of days with low DO (duration)

---

class: left, top

.center[
## DO: SUMMARIZE
]

* Summarize the data with [`anlz_domopep()`](https://tbep-tech.github.io/pepreporting/reference/anlz_domopep.html)


```r
anlz_domopep(dodat, thr = 2.3)
```

```
## # A tibble: 189 x 6
##    site             yr mo    do_mgl below_ave below_maxrun
##  * &lt;fct&gt;         &lt;dbl&gt; &lt;ord&gt;  &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
##  1 Peconic River  2013 Jan    11.6      0                0
##  2 Peconic River  2013 Feb    11.9      0                0
##  3 Peconic River  2013 Mar    11.7      0                0
##  4 Peconic River  2013 Apr     9.55     0                0
##  5 Peconic River  2013 May     7.90     0                0
##  6 Peconic River  2013 Jun     5.73     0.2              3
##  7 Peconic River  2013 Jul     3.12     0.889           12
##  8 Peconic River  2013 Aug     3.13     0.917           11
##  9 Peconic River  2013 Sep     4.81     0.483            6
## 10 Peconic River  2013 Oct     6.03     0.261            4
## # ... with 179 more rows
```

---

class: left, top

.center[
## DO: PLOT
]

* Plot the results with [`show_domatrix()`](https://tbep-tech.github.io/pepreporting/reference/show_domatrix.html)


```r
show_domatrix(dodat, thr = 2.3, show = 'below_ave')
```

&lt;img src="pepreporting2_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## DO: PLOT
]

* Plot the results with [`show_domatrix()`](https://tbep-tech.github.io/pepreporting/reference/show_domatrix.html)


```r
show_domatrix(dodat, thr = 2.3, show = 'below_maxrun')
```

&lt;img src="pepreporting2_files/figure-html/unnamed-chunk-23-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## DO: PLOT
]

* Plot the results with [`show_domatrix()`](https://tbep-tech.github.io/pepreporting/reference/show_domatrix.html)


```r
show_domatrix(dodat, thr = 4.8, show = 'below_ave')
```

&lt;img src="pepreporting2_files/figure-html/unnamed-chunk-24-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

class: left, top

.center[
## DO: DISCUSS
]

* The summaries show relative hypoxia stress between locations, with stress quantified as magnitude or duration
--

* What is the relevance of the threshold to a meaningful endpoint? 
--

* Are there breakpoints we need to consider?
--

* What can we reasonably say about the spatial extent of hypoxia? 

---

class: left, top

.center[
## RESOURCES
]

* Pathogens vignette: [link](https://tbep-tech.github.io/pepreporting/articles/pathogens.html)
* Dissolved oxygen vignette: [link](https://tbep-tech.github.io/pepreporting/articles/dissolvedoxygen.html)
* Package overview vignette: [link](https://tbep-tech.github.io/pepreporting/articles/Introduction.html)
* `pepreporting` package website: [link](https://tbep-tech.github.io/pepreporting/)
* `pepreporting` GitHub source: [link](https://github.com/tbep-tech/pepreporting)

---

class: left, top

.center[
## GOALS FOR TODAY
]

1. Vibe check: do we like these approaches? 

1. Discuss decision points on pathogen reporting

1. Discuss decision points on dissolved oxygen reporting
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
.logo {
  background-image: url(figure/TBEP_logo_web.png);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  top: 1em;
  right: 1em;
  width: 94px;
  height: 107px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
